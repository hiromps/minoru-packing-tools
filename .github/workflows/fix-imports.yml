# .github/workflows/streamlit-fix.yml

name: ðŸš€ One-Click Streamlit Fix

on:
workflow_dispatch:
inputs:
fix_type:
description: â€˜ä¿®æ­£ã‚¿ã‚¤ãƒ—â€™
required: true
default: â€˜allâ€™
type: choice
options:
- all
- imports-only
- requirements-only

jobs:
streamlit-fix:
runs-on: ubuntu-latest
steps:
- uses: actions/checkout@v4

```
- name: ðŸ”§ Apply All Fixes
  if: ${{ github.event.inputs.fix_type == 'all' || github.event.inputs.fix_type == 'imports-only' }}
  run: |
    # __init__.py files
    find . -name "*.py" -path "./src/*" -exec dirname {} \; | sort -u | xargs -I {} touch {}/__init__.py
    
    # Fix imports in all Python files
    find . -name "*.py" -path "./src/*" -exec sed -i '1i import sys, os; sys.path.append(os.path.dirname(os.path.abspath(__file__)))' {} \;

- name: ðŸ“¦ Update Requirements
  if: ${{ github.event.inputs.fix_type == 'all' || github.event.inputs.fix_type == 'requirements-only' }}
  run: |
    cat > requirements.txt << 'EOF'
    streamlit>=1.30.0
    numpy>=1.25.0
    ortools>=9.8.0
    setuptools>=68.0.0
    packaging>=21.0
    EOF
    
    echo "python-3.11" > runtime.txt

- name: ðŸ’¾ Auto Commit
  run: |
    git config user.name "Streamlit Auto-Fix"
    git config user.email "autofix@github.com"
    git add -A
    git diff --staged --quiet || git commit -m "ðŸ”§ Auto-fix Streamlit deployment issues"
    git push
```